<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Javascript, | Iacutone Deep Thoughts]]></title>
  <link href="http://iacutone.github.io/blog/categories/javascript/atom.xml" rel="self"/>
  <link href="http://iacutone.github.io/"/>
  <updated>2015-10-23T20:23:37-05:00</updated>
  <id>http://iacutone.github.io/</id>
  <author>
    <name><![CDATA[]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Gon Gem]]></title>
    <link href="http://iacutone.github.io/blog/2013/06/30/gon-gem/"/>
    <updated>2013-06-30T00:04:00-05:00</updated>
    <id>http://iacutone.github.io/blog/2013/06/30/gon-gem</id>
    <content type="html"><![CDATA[<p>I ran into difficulties trying to find a way to implement jQuery in a modal.  It is not possible to use remote: true in a form_tag with Twitter Bootstrap.  I successfully used the <a href='https://github.com/gazay/gon'>Gon Gem</a> in order to remove elements from the DOM when an instance variable reached a certain number.  If you find yourself in the position of needing to remove elements from a modal, this gem seems to be the way to go.</p>


<p><figure class='code'><figcaption><span>user_controller.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;pre&gt;&lt;code&gt;def create</span>
</span><span class='line'><span class="sr">  @user = User.new(params[:user])</span>
</span><span class='line'>
</span><span class='line'><span class="sr">  if @user.save</span>
</span><span class='line'>
</span><span class='line'><span class="sr">    @day_one_counter = []</span>
</span><span class='line'><span class="sr">    @day_one_counter = User.pluck(:time1)</span>
</span><span class='line'>
</span><span class='line'><span class="sr">    </span><span class="si">#@day_one_counter</span><span class="sr"> outputs an array of elements from the :time1 column. =&amp;gt; [&quot;11:00&quot;, &quot;11:00&quot;, nil, nil, nil]</span>
</span><span class='line'>
</span><span class='line'><span class="sr">    b = Hash.new(0)</span>
</span><span class='line'>
</span><span class='line'><span class="sr">    @day_one_counter.each do |v|</span>
</span><span class='line'><span class="sr">      b[v] += 1</span>
</span><span class='line'><span class="sr">    end</span>
</span><span class='line'>
</span><span class='line'><span class="sr">    #the block increments the key/</span><span class="n">value</span> <span class="n">pairs</span> <span class="k">in</span> <span class="n">the</span> <span class="n">instantiated</span> <span class="no">Hash</span><span class="o">.</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="p">{</span><span class="s2">&quot;11:00&quot;</span><span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span><span class="mi">2</span><span class="p">,</span> <span class="kp">nil</span><span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span><span class="mi">3</span><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="vi">@time1</span> <span class="o">=</span> <span class="n">b</span><span class="o">[</span><span class="s2">&quot;11:00&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="n">gon</span><span class="o">.</span><span class="n">time1</span> <span class="o">=</span> <span class="vi">@time1</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">#@time1 pulls out the value of the pair =&amp;gt; 2</span>
</span><span class='line'>    <span class="c1">#gon.time1 =&amp;gt; 2, in order to use the @time1 instance variable in users.js</span>
</span><span class='line'>
</span><span class='line'>    <span class="vi">@time2</span> <span class="o">=</span> <span class="n">b</span><span class="o">[</span><span class="s2">&quot;11:20&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="n">gon</span><span class="o">.</span><span class="n">time2</span> <span class="o">=</span> <span class="vi">@time2</span>
</span><span class='line'>
</span><span class='line'>    <span class="vi">@time3</span> <span class="o">=</span> <span class="n">b</span><span class="o">[</span><span class="s2">&quot;11:40&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="n">gon</span><span class="o">.</span><span class="n">time3</span> <span class="o">=</span> <span class="vi">@time3</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">render</span> <span class="ss">:time</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="n">render</span> <span class="ss">:new</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="o">&lt;</span><span class="sr">/code&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>This is a conintuation of the Pluck Method from my last blog post.  For an overview of what is happening, read the comments provided above.  With the gone.time1 variable, I can now use jQuery in my users.js file in order to remove elements from the DOM that go over a given number, in this case 5.</p>


<p><figure class='code'><figcaption><span>users.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="k">if</span> <span class="p">(</span><span class="nx">gon</span><span class="p">.</span><span class="nx">time1</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.wrapper1&#39;</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">gon</span><span class="p">.</span><span class="nx">time2</span> <span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.wrapper2&#39;</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>...and the form</p>


<p><figure class='code'><figcaption><span>_time1.html.erb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;pre&gt;&lt;code&gt;&amp;lt;%= form_for @user do |f| %&amp;gt;</span>
</span><span class='line'><span class="sr">    &amp;lt;div class=&#39;wrapper1&#39; id=&#39;pad&#39;&amp;gt;11:00 A.M. &amp;lt;%= f.radio_button(:time1, &#39;11:00&#39;) %&amp;gt;&amp;lt;br /</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="sx">%= 5 - @time1 unless @time1 =</span><span class="o">=</span> <span class="kp">nil</span> <span class="sx">%&amp;gt; spots remaining.&amp;</span><span class="n">lt</span><span class="p">;</span><span class="o">/</span><span class="n">div</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span>
</span><span class='line'>    <span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s1">&#39;wrapper2&#39;</span> <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;pad&#39;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="mi">11</span><span class="p">:</span><span class="mi">20</span> <span class="n">A</span><span class="o">.</span><span class="n">M</span><span class="o">.</span> <span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="sx">%= f.radio_button(:time1, &#39;11:20&#39;) %&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;%=</span> <span class="mi">5</span> <span class="o">-</span> <span class="vi">@time2</span> <span class="k">unless</span> <span class="vi">@time2</span> <span class="o">==</span> <span class="kp">nil</span> <span class="sx">%&amp;gt; spots remaining.&amp;</span><span class="n">lt</span><span class="p">;</span><span class="o">/</span><span class="n">div</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span>
</span><span class='line'>    <span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s1">&#39;wrapper&#39;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="sx">%= f.radio_button(:time1, &#39;No time.&#39;) %&amp;gt;  Interested but not available during these times. Please inform me of future conversation opportunities.&amp;lt;br /&amp;gt;&amp;lt;/div&amp;gt;</span>
</span><span class='line'><span class="sx">&amp;lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">hidden_field</span> <span class="ss">:day</span><span class="p">,</span> <span class="ss">:value</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="s1">&#39;July 10&#39;</span> <span class="sx">%&amp;gt;</span>
</span><span class='line'><span class="sx">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">button</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-inverse&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span><span class="n">class</span><span class="o">=</span><span class="s2">&quot;actions&quot;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="no">Submit</span><span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="o">/</span><span class="n">button</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="o">%</span> <span class="k">end</span> <span class="o">%&amp;</span><span class="n">gt</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;</span><span class="sr">/code&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Since the @time1 instance variable and therefore, gon.time1 are saved after my create action, the applicable time is > 4 if I want a total of 5 elements for a particular time on my :time1 column.  The next time the modal is visited, the element will be removed!</p>




<p>I am so excited I found this gem and got my modal to work correctly! Also, a thanks for Railscast for the tutorial on the gem.</p>




<p><a href='http://railscasts.com/episodes/324-passing-data-to-javascript'>Passing Data to Javascript</a></p>



]]></content>
  </entry>
  
</feed>
