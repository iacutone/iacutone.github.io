
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Iacutone.rb</title>
  <meta name="author" content="">

  
  <meta name="description" content="I have been developing a CMS for students at the Flatiron School. Some gems I used for the first time include Sidekiq, Amazon S3, Carrierwave and Fog &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://iacutone.github.io/posts/5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Iacutone.rb" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-38341110-1', 'auto');
    ga('send', 'pageview');

  </script>



</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Iacutone.rb</a></h1>
  
    <h2>coding and things</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
<ul class="subscribe">
  <li><a href="https://github.com/iacutone" rel="subscribe-github" title="@iacutone on GitHub" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 50,0 C 22.385714,0 0,22.385714 0,50 0,77.614286 22.385714,100 50,100 77.614286,100 100,77.614286 100,50 100,22.385714 77.614286,0 50,0 z m 29.692858,79.692858 c -3.859184,3.859182 -8.351022,6.887754 -13.35,9.00306 -1.27041,0.536736 -2.560204,1.009184 -3.867348,1.415306 v -7.493878 c 0,-3.938774 -1.35102,-6.835714 -4.053062,-8.690816 1.692858,-0.163264 3.24694,-0.390816 4.663266,-0.683672 1.416326,-0.292858 2.913266,-0.716328 4.491838,-1.27041 1.57857,-0.55408 2.994896,-1.213264 4.247958,-1.97755 1.253062,-0.765306 2.458164,-1.758164 3.613266,-2.978572 1.155102,-1.220408 2.12449,-2.604082 2.905102,-4.15 0.780612,-1.545918 1.4,-3.40204 1.855102,-5.566326 0.455102,-2.164286 0.683674,-4.54898 0.683674,-7.153062 0,-5.045918 -1.643878,-9.341836 -4.931634,-12.890816 C 77.44796,33.35 77.285714,29.10204 75.463266,24.512244 l -1.22143,-0.145918 c -0.845918,-0.09796 -2.368366,0.260204 -4.565306,1.07449 -2.196938,0.814286 -4.663264,2.14796 -7.396938,4.004082 -3.87449,-1.07449 -7.893878,-1.611224 -12.061224,-1.611224 -4.19898,0 -8.203062,0.536734 -12.012246,1.611224 -1.72449,-1.17245 -3.361224,-2.139796 -4.907142,-2.905102 C 31.753062,25.77449 30.516326,25.254082 29.587756,24.97653 28.660204,24.7 27.79796,24.528572 27,24.463266 c -0.79796,-0.0653 -1.310204,-0.08062 -1.537756,-0.04898 -0.22755,0.03164 -0.390816,0.0653 -0.487754,0.09796 -1.82347,4.62245 -1.985714,8.87143 -0.487756,12.743878 -3.287754,3.54796 -4.931632,7.844898 -4.931632,12.890816 0,2.604082 0.227552,4.988776 0.683674,7.153062 0.456122,2.164286 1.07449,4.020408 1.855102,5.566326 0.780612,1.545918 1.75,2.929592 2.905102,4.15 1.155102,1.220408 2.360204,2.213266 3.613264,2.978572 1.253062,0.766326 2.669388,1.42449 4.24796,1.97755 1.578572,0.554082 3.07551,0.976532 4.491836,1.27041 1.416328,0.292856 2.970408,0.521428 4.663266,0.683672 -2.669388,1.82347 -4.004082,4.720408 -4.004082,8.690816 v 7.639796 C 36.536734,89.818368 35.083674,89.3 33.656122,88.695918 c -4.99898,-2.115306 -9.490816,-5.143878 -13.35,-9.00306 -3.859184,-3.859184 -6.887754,-8.351022 -9.00306,-13.35 C 9.1163263,61.171428 8.0071428,55.67347 8.0071428,50 c 0,-5.67347 1.1091835,-11.171428 3.2969392,-16.342858 2.115306,-4.998978 5.143878,-9.490816 9.00306,-13.35 3.859184,-3.859182 8.351022,-6.887754 13.35,-9.00306 C 38.828572,9.1163266 44.32653,8.0071428 50,8.0071428 c 5.67347,0 11.171428,1.1091838 16.342858,3.2969392 5,2.115306 9.490816,5.143878 13.35,9.00306 3.859182,3.859184 6.887754,8.351022 9.00306,13.35 2.186736,5.17245 3.295918,10.67041 3.295918,16.342858 0,5.672448 -1.109182,11.171428 -3.296938,16.342858 -2.115306,4.998978 -5.143878,9.490816 -9.00204,13.35 l 0,0 z"></path></svg></a></li>
</ul>
  
  
  
<ul class="subscribe">
  <li><a href="https://twitter.com/iacutone" rel="subscribe-twitter" title="@iacutone on Twitter" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewBox="0 0 512 512"><path class="social" d="M0.001,334.932c33.327,30.816,118.891,59.981,188.517-8.271c-12.52,1.955-22.972-0.416-30.913-8.269
  c-7.531-7.465-7.945-15.182-3.914-22.202c3.275-5.725,10.184-9.741,16.977-13.934c-12.323,2.285-22.829,1.095-32.218-3.706
  c-12.604-6.444-24.863-13.228-28.3-27.207c7.71-8.112,16.28-15.359,34.831-12.627c-17.45-5.83-33.087-13.429-44.41-24.815
  c-11.028-11.091-12.163-18.302-13.932-26.996c9.632-3.567,19.688-5.421,30.478-4.353c-24.397-12.476-34.757-29.63-40.487-48.325
  c-1.731-5.652-2.044-11.03-1.31-16.545c98.826,37.305,145.11,64.109,170.662,89.251c11.496-30.589,38.3-99.868,78.371-123.646
  c0.191,3.77-1.309,7.837-4.357,12.189c11.863-6.609,21.125-17.188,37.445-16.98c-1.879,7.723-7.279,13.904-17.85,17.854
  c10.662-4.084,21.463-7.545,32.65-9.578c10.375-1.881,10.229,6.304,4.355,10.444c-11.916,8.412-24.578,9.456-37.006,13.498
  c38.105,0.949,69.266,18.994,93.604,58.343c8.088,13.074,13.52,26.149,14.807,40.487c16.254,4.563,32.426,5.494,48.76,2.61
  c4.475-0.796,8.645-1.63,12.627-3.482c-6.354,9.529-13.686,17.356-23.947,20.899c-9.811,3.387-19.637,6.688-30.473,6.968
  c17.641,6.675,37.082,7.045,57.033,5.659c-24.402,23.486-43.08,22.922-61.824,22.642c-8.221,34.703-25.025,69.315-60.52,101.005
  c-46.559,41.569-96.678,61.397-148.457,65.742c-48.552,4.07-95.488,3.512-146.726-20.464
  C56.486,393.349,24.648,368.884,0.001,334.932L0.001,334.932z"/></svg></a></li>
</ul>
  
  
  
  
  
  
    
      <form action="https://www.google.com/search" method="get">
        <fieldset role="search">
          <input type="hidden" name="sitesearch" value="iacutone.github.io" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/05/amazon-s3/">Carrierwave Gem, Part 1</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-05T18:59:00-05:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>6:59 pm</span></time>
        
         | <a href="/blog/2013/06/05/amazon-s3/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have been developing a CMS for students at the Flatiron School.  Some gems I used for the first time include Sidekiq, Amazon S3, Carrierwave and Fog. This blog post is a walkthrough of how to implement these gems in your own Rails app.  Furthermore, h/t to Ryan Bates of Railscasts for the invaluable information in his videos.  This blog post will be broken down into different parts, implementing Carrierwave is the objective of this post.</p>


<p></p>

<p>The first step is to initiate the <a href='https://github.com/carrierwaveuploader/carrierwave'>Carrierwave Gem</a> in order to upload pictures to the app.  So, the typical steps:</p>




<p>Add 'carrierwave' to your Gemfile</p>


<pre><code>&lt;div class='bogus-wrapper'&gt;&lt;notextile&gt;&lt;figure class='code'&gt;&lt;div class="highlight"&gt;&lt;table&gt;&lt;tr&gt;&lt;td class="gutter"&gt;&lt;pre class="line-numbers"&gt;&lt;span class='line-number'&gt;1&lt;/span&gt;
</code></pre>

<p></pre></td><td class='code'><pre><code class=''><span class='line'>$ rails g uploader avatar</span></code></pre></td></tr></table></div></figure></notextile></div>
<br />
    <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rails g migration add_avatar_to_profiles avatar:string</span></code></pre></td></tr></table></div></figure>
<br />
    <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake db:migrate</span></code></pre></td></tr></table></div></figure></p>

<p>Now, our Profile table has an avatar attribute.  An uploader folder was also added to your app route directory named after your attribute name, in this case avatar_uploader.rb.  Here is the code in the file.</p>




<figure class='code'><figcaption><span>avatar_uploader.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># encoding: utf-8</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">AvatarUploader</span> <span class="o">&lt;</span> <span class="no">CarrierWave</span><span class="o">::</span><span class="no">Uploader</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="c1"># include CarrierWaveDirect::Uploader</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Include RMagick or MiniMagick support:</span>
</span><span class='line'>  <span class="kp">include</span> <span class="no">CarrierWave</span><span class="o">::</span><span class="no">RMagick</span>
</span><span class='line'>  <span class="c1"># include CarrierWave::MiniMagick</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:</span>
</span><span class='line'>  <span class="c1"># include Sprockets::Helpers::RailsHelper</span>
</span><span class='line'>  <span class="c1"># include Sprockets::Helpers::IsolatedHelper</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Choose what kind of storage to use for this uploader:</span>
</span><span class='line'>  <span class="n">storage</span> <span class="ss">:file</span>
</span><span class='line'>  <span class="c1"># storage :fog</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># include CarrierWave::MimeTypes</span>
</span><span class='line'>  <span class="c1"># process :set_content_type</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Override the directory where uploaded files will be stored.</span>
</span><span class='line'>  <span class="c1"># This is a sensible default for uploaders that are meant to be mounted:</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">store_dir</span>
</span><span class='line'>    <span class="s2">&quot;uploads/</span><span class="si">#{</span><span class="n">model</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">underscore</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">mounted_as</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Provide a default URL as a default if there hasn&#39;t been a file uploaded:</span>
</span><span class='line'>  <span class="c1"># def default_url</span>
</span><span class='line'>  <span class="c1">#   # For Rails 3.1+ asset pipeline compatibility:</span>
</span><span class='line'>  <span class="c1">#   # asset_path(&quot;fallback/&quot; + [version_name, &quot;default.png&quot;].compact.join(&#39;_&#39;))</span>
</span><span class='line'>  <span class="c1">#</span>
</span><span class='line'>  <span class="c1">#   &quot;/images/fallback/&quot; + [version_name, &quot;default.png&quot;].compact.join(&#39;_&#39;)</span>
</span><span class='line'>  <span class="c1"># end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Process files as they are uploaded:</span>
</span><span class='line'>  <span class="c1"># process :scale =&gt; [200, 300]</span>
</span><span class='line'>  <span class="c1">#</span>
</span><span class='line'>  <span class="c1"># def scale(width, height)</span>
</span><span class='line'>  <span class="c1">#   # do something</span>
</span><span class='line'>  <span class="c1"># end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Create different versions of your uploaded files:</span>
</span><span class='line'>  <span class="n">version</span> <span class="ss">:thumb</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">process</span> <span class="ss">:resize_to_limit</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="o">]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">version</span> <span class="ss">:profile</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">process</span> <span class="ss">:resize_to_limit</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">350</span><span class="p">,</span> <span class="mi">350</span><span class="o">]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Add a white list of extensions which are allowed to be uploaded.</span>
</span><span class='line'>  <span class="c1"># For images you might use something like this:</span>
</span><span class='line'>  <span class="c1"># def extension_white_list</span>
</span><span class='line'>  <span class="c1">#   %w(jpg jpeg gif png)</span>
</span><span class='line'>  <span class="c1"># end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Override the filename of the uploaded files:</span>
</span><span class='line'>  <span class="c1"># Avoid using model.id or version_name here, see uploader/store.rb for details.</span>
</span><span class='line'>  <span class="c1"># def filename</span>
</span><span class='line'>  <span class="c1">#   &quot;something.jpg&quot; if original_filename</span>
</span><span class='line'>  <span class="c1"># end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>There is a lot of code in here commented out which will be used in later posts for using both Fog and Amazon S3.  I like being able to create different sizes under the version sections, for example</p>


<pre><code>&lt;div class='bogus-wrapper'&gt;&lt;notextile&gt;&lt;figure class='code'&gt;&lt;div class="highlight"&gt;&lt;table&gt;&lt;tr&gt;&lt;td class="gutter"&gt;&lt;pre class="line-numbers"&gt;&lt;span class='line-number'&gt;1&lt;/span&gt;
</code></pre>

<p><span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'> <span class="n">version</span> <span class="ss">:thumb</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">process</span> <span class="ss">:resize_to_limit</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="o">]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<br /></p>

<p>to add elegant versatility to the sizes of your images.</p>




<p>In your Profile model add:</p>


<pre><code>    &lt;div class='bogus-wrapper'&gt;&lt;notextile&gt;&lt;figure class='code'&gt;&lt;figcaption&gt;&lt;span&gt;profile.rb &lt;/span&gt;&lt;/figcaption&gt;
</code></pre>

<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>     <span class="n">mount_uploader</span> <span class="ss">:avatar</span><span class="p">,</span> <span class="no">AvatarUploader</span>
</span><span class='line'>      
</span></code></pre></td></tr></table></div>


<p></figure></notextile></div></p>

<p>To display the avatar in your View:</p>


<pre><code>    &lt;div class='bogus-wrapper'&gt;&lt;notextile&gt;&lt;figure class='code'&gt;&lt;figcaption&gt;&lt;span&gt;show.html.erb &lt;/span&gt;&lt;/figcaption&gt;
</code></pre>

<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>     <span class="o">&lt;%=</span> <span class="n">image_tag</span> <span class="n">image_url</span><span class="p">(</span><span class="ss">:thumb</span><span class="p">)</span> <span class="o">%&gt;</span>
</span><span class='line'>      
</span></code></pre></td></tr></table></div>


<p></figure></notextile></div></p>

<p>In your form:</p>


<pre><code>    &lt;div class='bogus-wrapper'&gt;&lt;notextile&gt;&lt;figure class='code'&gt;&lt;figcaption&gt;&lt;span&gt;new.html.erb &lt;/span&gt;&lt;/figcaption&gt;
</code></pre>

<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>     <span class="o">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">file_field</span> <span class="ss">:avatar</span> <span class="o">%&gt;</span>
</span><span class='line'>      
</span></code></pre></td></tr></table></div>


<p></figure></notextile></div></p>

<p> That is all, you can now add images of specific sizes to your Rails app!</p>


<p><a href='http://railscasts.com/episodes/253-carrierwave-file-uploads'>Carrierwave Railscast</a><br />
<a href='http://railscasts.com/episodes/383-uploading-to-amazon-s3'>Uploading to Amazon S3 Railscast</a><br />
<a href='http://railscasts.com/episodes/366-sidekiq'>Sidekiq Railscast</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/22/binary-search-trees/">Binary Search Trees</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-04-22T14:13:00-05:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2013</span></span> <span class='time'>2:13 pm</span></time>
        
         | <a href="/blog/2013/04/22/binary-search-trees/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Properties</h2>


<ol>
    <li>The left subtree of a node contains only nodes with keys less than the node's key.</li>
    <li>The right subtree of a node contains only nodes with keys greater than the node's key.</li>
    <li>The left and right subtree must each also be a binary search tree.</li>
    <li>There must be no duplicate nodes.</li>
</ol>




<h3>Benefits</h3>


<ul>
    <li>Insert, find and remove any entry</li>
    <li>Quickly find entry with min/max key</li>
    <li>Entry nearest another entry, like in a dictionary, but cannot remember how to spell the word</li>
</ul>




<h3>BST Invariant</h3>


<p><p>For any node x, every key in the left subtree of x is &lt;= x&rsquo;s key</p>
<p>For any node x, every key in the right subtree of x is >= x&rsquo;s key</p>
<p><img src = "/images/BST.png" height = "500" width = "500"></p><br>
<p>Inorder traversal of a binary search tree visits nodes in sorted order, the left of root (18) are displayed before the right.<p/></p>

<p><h3>Operations</h3>
<h4>Entry Find (Object k)</h4>
<ul>
    <li>Object looking for compared to object stored in key (if it is there)</li>
    <li>If true, returns the entry</li>
    <li>Else returns nil</li>
    <li>Good for exact matches, can do faster with hash table</li>
</ul><br>
<p>How to find smallest key >= k or largest key &lt;= k?<p/>
    <p>When searching down the tree for a key k that is not in the tree, we encounter both.</p>
    <ul>
        <li>Node containing smallest key > k, and</li>
        <li>Node containing largest key &lt; k </li>
    </ul><br></p>

<pre><code>&lt;p&gt;Ex. search for 27 as k (from above pic)&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;Keeps searching nodes to the right, gets to 28 and returns nil&lt;/li&gt;
    &lt;li&gt;encounters 25 &lt; k and 28 &gt; k&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p><h4> Entry first();<br> -If empty return null, otherwise start at root and walk down left repeatedly until you reach node with no left child, that node has minimum key.</h4>
<h4> Entry last();<br> -Mirror of left, but walks down right tree</h4></p>

<p><h4>Entry insert(Object k, Object v);</h4>
<ul>
    <li>Follow same path through the tree as find();</li>
    <li>When you reach null reference, replace null with reference to new node with entry(k, v), duplicate keys are allowed.</li>
    <li>Puts new entry on the left subtree of old one</li>
</ul></p>

<p><h4>The delete operations (where shit gets complex)</h4>
<h4>Entry remove(Object k);</h4>
<ul>
    <li>Find node n with key k, if k not found return null</li>
    <li>If n has no children, detach it from parent</li>
    <li>If n has one child, move child up to take n&rsquo;s place</li>
    <li>If node has 2 children</li>
    <ul>
        <li>Suppose we want to remove 12 from above pic</li>
        <li>Let x be the node in n&rsquo;s right subtree with smallest key</li>
        <ul>
            <li>Keep going to the left, in this case, 13 is node x, only has one child</li>
            <ul>
                <li>Remove x, has no left child and therefore, is easily removed</li>
                <li>Replace n&rsquo;s key with x&rsquo;s key</li>
            </ul>
        </ul>
    </ul>
</ul></p>

<p><p><img src = "/images/bstexample.png" height = "500" width = "500"></p><br></p>

<p><p>h/t Jonathan Shewchuk at UC Berkeley</p>
<a href='https://www.youtube.com/watch?v=V_3BM0ykITM'>His lecture via Youtube</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/16/the-yipit-api-and-whenever-gem/">The Yipit API and Whenever Gem</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-04-16T17:05:00-05:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>5:05 pm</span></time>
        
         | <a href="/blog/2013/04/16/the-yipit-api-and-whenever-gem/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last week Alex and I presented Platt101 at our NYC on Rails Meetup, at the Flatiron School.  Platt101 let's a user write reviews about restaurants they have been to and renders those restaurants on a Google Map.  The restaurants are based on the 101 best according to New York Magazine.  The restaurants a user has been to render in a different color than restaurants a user hasn't had the pleasure of dining.  A fellow student (h/t Anthony) suggested we impliment a GroupOn link in our restaurant list in order for a user to provide the user incentive to go dine at given restaurants.</p>




<p> We decided to use the <a href='http://yipit.com/about/api/'>Yipit API</a> in order to aggregate all discount incentives from numerous discount sites such as GroupOn.  We accessed the Yipit API via the Yipit <a href='https://github.com/gangster/yipit'>gem</a> for Ruby on Rails, created by Gangster.  Aside from our client session running a few times, the gem provided for all of our data parsing needs.  The Yelp API we used to seed our database with relevant restaurant information included phone numbers.  We searched the phone numbers in our database against phone numbers on Yipit in order to find deals for the given restaurants on our list.  This functionality is provided with a rake task.  Here is the code: </p>


<p><br></p>

<p><img src = "/images/yipit.png" height = "500" width = "500"></p>




<p> The rake task provides us the ability to use the Whenever gem in order to run the rake task everyday.  This way our database in reseeded with new data about restaurant deals on a daily basis.  The Whenever gem was easy to impliment.</p>


<p><br></p>

<p><img src = "/images/whenever-2.png" height = "500" width = "500"></p>




<p>This code is automatically added to your config > schedule.rb when you run whenever . in terminal.  You can customize Whenever to run whenever you want.</p>




<p>Now, this all works well in development, but Platt101 is deployed on Heroku.  In production, we needed to reset up the Whenever gem.  This is also easy to accomplish on Heroku. Use <a href='https://addons.heroku.com/scheduler'>Heroku Scheduler</a> in order to run a chron job in production.  They do make you use input your credit card info, which is whack, but it says free... we shall see.</p>


<p><a href='http://www.platt101.com'>Platt101 can be found here.</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/01/jambox/">Jambox</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-03-01T07:39:00-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2013</span></span> <span class='time'>7:39 am</span></time>
        
         | <a href="/blog/2013/03/01/jambox/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>AirPlay</h2>




<p>Learning how Airplay works: it allows wireless streaming of audio, video and photos. </p>


<p></p>

<p> My original idea was to rip the music information going onto the Flatiron AirPlay, then automatically tweet this information via Twitter.  I liked this idea because we play so much cool and unfamiliar music.  It would be great to keep track of what is playing.  Over time, I opened a myriad of tabs and discovered many interesting API's.  These include a few API's which mirror AirPlay on a laptop (<a href="http://airparrot.com/">AirParrot.</a> and <a href="http://www.airserverapp.com/">AirServer.</a>).  Also, many music API's were discovered.  These include <a href="http://echonest.com/">Echonest</a>, <a href="http://developers.soundcloud.com/">Soundcloud</a> and many others. </p>




<p> The original idea went down in flames when I learned how difficult it is to hack the AirPlay.  <a href="http://www.aorensoftware.com/blog/2011/08/20/exploring-airplay-mirroring-internals/">This</a> blog post illustrated how this hacker tried to gain access to the AirPlay from WiFi packets via KisMAC, a derivative of WireShark.  Also, there are problems jailbreaking the DRM encryption.  The idea is possible, but a crazy task.  Idea aborted...</p>




<p><a href="https://github.com/play/play/tree/master/app/api ">GitHub Play</a> deserves some special recognition.  It allows the GitHub offices to wirelessly create playlists synchronously in all of their offices around the globe.  The next iteration of our goal was to get the GitHub Play to work locally.  You can clone it at the link above.  However, GitHub Play relies on an old version of iTunes which includes iTunes DJ.  Also, Play ran on Ruby 1.8.7, and the dependencies were a mess.  So, our group threw this idea of out the window.  </p>




<h2> GitHub Play </h2>


<p><img src = "/images/play.png" height = "500" width = "500"></p>




<p>Our groups next iteration is to simplify the GitHub Play.  Currently we are setting up a server where people can upload their mp3's.  Directions to create your own streaming music player in Ruby can be found <a href="http://net.tutsplus.com/tutorials/create-a-simple-music-streaming-app-with-ruby-on-rails/ ">here.</a>  The goal of this project is to eventually create a service where a group of people can all upload their songs onto a server and they will be played in sequence on a playlist.  For example, if you are at a party, everyone can put songs on a playlist, so that no one person will have complete control of the music.  We also want to implement a Reddit-esque leaderboard so people on the server can upvote/downvote songs.  If a song gets too many downvotes, it will be erased from the playlist.  </p>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/20/adventures-in-code/">Adventures in Code</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-20T14:43:00-05:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:43 pm</span></time>
        
         | <a href="/blog/2013/02/20/adventures-in-code/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><div class="entry-content"><p>One can run into some cataclysmic errors trying to setup and deploy an Octopress account.  Personally, I kept raking new themes from Github to my Octopress account and finally, my blog broke.  In order to keep the same url, I deleted my Github repository and recreated an Octopress account.</p>

<h2>Things I learned</h2>

<p>Knowing:</p>

<p><code>  $ subl .</code></p>

<p>This saves so much time. The code snipped will open the entire current directory in your terminal.</p>

<p>Now, things are going well and I begin to play with some HTML, CSS and JS code.  I stumbled upon this gold nugget.  Sweet animated clouds <a href="http://www.clicktorelease.com/code/css3dclouds/">here.</a></p>

<p><img src = "/images/clouds.png" height = "600" width = "600"></p>

<p> ...and a tutorial to recreate animated clouds by the author <a href="http://www.clicktorelease.com/blog/how-to-make-clouds-with-css-3d">here.</a></p>

<p>It was loads of fun messing with the CSS and JS source code and I manipulated the code into this:</p>

<p><img src = "/images/smile.png" height = "600" width = "600"></p>

<p>Awesome! I created this a massive randomly generated semi-transparent smiley face.  Now, how do I implement this information to Octopress? The CSS ans JS code is hard core and I do not understand how works very well.  What do I do now?<p/>  

<a href="http://bonsaijs.org/">Bonsai JS</a> is a Javascript graphics library with step-by-step tutorials on how to implement all sorts of useful code such as rendering shapes, gradients and animation.  It also has a built in editor to play with said code.  With the editor and tutorials I can quickly learned how to do code graphics with JS.  An example of what can be created with Bonsai is below.</p>
</div>




<script src="http://cdnjs.cloudflare.com/ajax/libs/bonsai/0.4/bonsai.min.js"></script>


<div id="movie"></div>


<script>
  bonsai.run(document.getElementById('movie'), {
    code: function() {
      new Circle(150, 50, 30)
  .fill('red')
  .fill(gradient.radial(['rgba(0,0,0,0)', 'rgba(0,0,0,0.3)']))
  .addTo(stage)
  .animate('7s', { x: 500 }, { easing: 'bounceInOut', repeat: 100 })
    }
  });
</script>




<p>Sweet.  Thanks to my fellow Flatiron students who helped me along the way!</p>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/13/git-commandments/">Git Commandments</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-13T09:17:00-05:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>9:17 am</span></time>
        
         | <a href="/blog/2013/02/13/git-commandments/#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


  <div class="entry-content"><div class="entry-content">
<p>Don&#8217;t change master.</p>
<p><code>$ git pull &#8211;&#8211;rebase</code></p>

<p>  -to pull from the master and then create new  branch</p>

<p>  -now you have an up to date branch to code your   magic</p>
<p><code>$ git status</code></p>

<p>  -run after you change things in your branch</p>

<p>  -shows you what changed</p>
<p><code>$ git add .</code></p>

<p><code>$ git commit -m &#8220;Your message&#8221;<code></p>

<p><code>$ git co master</code></p>

<p> -checkout master before your merge</p>

<p><code>$ git pull &#8211;&#8211;rebase</code></p>

<p>  -ensure that there haven&#8217;t been any changes before you merge to master branch</p>

<p><code>$ git merge <branch name> -m &#8220;Your message&#8221;</code></p>
<p><code>$ git push</code></p>

<p>-data now updated on git!</p>


</div>

</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/4">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 -  -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'iacutone';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
